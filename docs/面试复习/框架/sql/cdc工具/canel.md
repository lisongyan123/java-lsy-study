# canel 
1. 主要用途是基于 MySQL 数据库增量日志解析, 提供增量数据订阅和消费
2. 也可以用 Databus 监听数据

## 为什么用 canel
1. 更灵活的架构, 多机房同步比较简单
2. 异构表之间也可以同步, 同时可以控制不同步 DDL 以免出现数据丢失和不一致
3. Canal 可以实现一个表一线程, 多个表多线程的同步, 速度更快。同时会压缩简化要传输的 binlog, 减少网络压力
4. 双 A 机房同步目前 mysql 的 M-M 部署结构, 不支持解决数据的一致性问题, 基于 canal 的双向复制 + 一致性算法, 可一定程度上解决这个问题, 实现双 A 机房

可以首页广告缓存, 网站公布, 商品数据, 击穿缓存更新, 商品数据缓存更新, ES(索引库数据增量更新)

## 工作原理
1. master 主库将改变记录, 发送到二进制文件(binary log)中
2. slave 从库向 mysql Master 发送 dump 协议, 将 master 主库的 binary log events 拷贝到它的中继日志(relay log)
3. slave 从库读取并重做中继日志中的事件, 将改变的数据同步到自己的数据库
4. 自己伪装成 slave, 从 master 复制数据。读取 binlog 是需要 master 授权的, 因为 binlog 是加密的, 授权分用户名密码才能读。master 授权后不知道读他的 binlog 的是从机还是 canal, 他的所有传输协议都符合从机的标准, 所以 master 一直以为是从机读的
